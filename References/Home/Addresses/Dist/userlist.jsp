<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri="/WEB-INF/app.tld"    prefix="app" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %>

<html:html>
  <head>
    <html:base/>
    <link href="css/shoemake.css" rel="stylesheet" type="text/css">
    <script type="text/javascript">
       function setCheckboxes()
       {
          var form = document.forms[0];
          var val = form.selectAll.checked;
          for (var i=0; i < form.elements.length; i++)
          {
             if (form.elements[i].type == "checkbox")
             {
                form.elements[i].checked = val;
             }  
          }
       }

       function confirmDelete()
       {
          if (confirm("Are you sure you want to delete the selected user(s)?"))
          {
             var form = document.forms[0];
             form.submit();
          }
       }

       function confirmDeleteAll()
       {
          if (confirm("WARNING: This will delete all users in the system.  Are you sure you want to cotinue?"))
          {
             window.location=top.location+"DeleteAllUsers.do"; 
          }
       }

    </script>
  </head>
  <body>
    <html:form action="/DeleteUsers">
       <table align="center" width="80%">
          <!--  BREADCRUMBS  -->
          <tr>
             <td>
                <table cellpadding="0" cellspacing="0">
                   <tr>
                      <td class="breadcrumb">User List</td>
                   </tr>
                </table>
             </td>
             <td>&nbsp;</td>
          </tr>
          <!--  BLANK LINE  -->
          <tr><td>&nbsp;</td></tr>
          <!--  TOOLBAR  -->
          <tr>
             <td>
                <table cellpadding="0" cellspacing="0" align="center">
                   <tr>
                      <td><a href="AddUserPage.do"><img border="0" src="images/buttonAddUser.gif" alt="Add User" height="26"></a></td>
                      <td width="30">&nbsp;</td>
                      <td><input type="image" src="images/buttonDeleteUser.gif" onclick="confirmDelete()" alt="Delete Users" height="26"></td>
                      <!--  <td width="30">&nbsp;</td>  -->
                      <!--  <td><a href="DeleteAllUsers.do"><img border="0" src="images/buttonDeleteAll.gif" alt="Delete All" height="26"></a></td>  -->
                      <!--  <td><input type="image" src="images/buttonDeleteAll.gif" onclick="confirmDeleteAll()" alt="Delete All Users" height="26"></td>  -->
                   </tr>
                </table>
             </td>
          </tr>
          <!--  TITLE  -->
          <tr>
          <tr><td>&nbsp;</td></tr>
             <td>
                <html:errors/>&nbsp;
            </td>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <tr>
             <td class="title" align="center"><bean:message key="userlist.heading"/></td>
          </tr>
          <tr>
             <td>
                <!--   GRID  --> 
                <table align="center" width="100%">
                   <tr>
                      <!--   Headers  --> 
                      <th><input name="selectAll" type="checkbox" onclick="setCheckboxes()"/></th>
                      <th><a class="header" href="GetUserList.do?method=sortUserName"><bean:message key="userlist.login.title"/></a></th>
                      <th><a class="header" href="GetUserList.do?method=sortFirstName"><bean:message key="userlist.firstname.title"/></a></th>
                      <th><a class="header" href="GetUserList.do?method=sortLastName"><bean:message key="userlist.lastname.title"/></a></th>
                   </tr>
                                                                             
                   <%--  GET THE USER LIST DATA  --%>
                   <% // Retrieve the user list generated by the action.
                      java.util.Vector list = (java.util.Vector)(request.getAttribute("mjs.home.ReturnValue"));
                      String tableRowClass = "plain";
                      for (int C=0; C <= list.size()-1; C++)
                      { 
                         mjs.home.model.User user = (mjs.home.model.User)(list.get(C)); 
             
                         // Odd or even row?
                         if (C % 2 > 0)
                            tableRowClass = "highlight";
                         else
                            tableRowClass = "plain";
                    %>
                         <tr class="<%= tableRowClass%>">
                            <td align="center"><html:multibox property="selectedItems" value="<%= user.getUserID()+"" %>"></html:multibox></td>
                            <td><a href="UpdateUserPage.do?id=<%= user.getUserID() %>"><%= user.getUserName()%></a></TD>
                            <td><%= user.getFirstName()%></td>
                            <td><%= user.getLastName()%></td>
                         </tr>
                   <% } %> 
                </table>
             </td>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <!--  STATUS BAR  -->
          <tr>
             <td class="breadcrumb" align="center"><bean:write scope="request" name="status"/></td>
          </tr>
       </table>&nbsp;
    </html:form>
  </body>
</html:html>
